@model MessagesVM
<section class="overlape">
    <div class="block no-padding">
        <div data-velocity="-.1" style="background: url(../assets/images/mslider1.jpg) repeat scroll 50% 422.28px transparent;" class="parallax scrolly-invisible no-parallax"></div><!-- PARALLAX BACKGROUND IMAGE -->
        <div class="container fluid">
            <div class="row">
                <div class="col-lg-12">
                    <div class="inner-header">
                        <h3>Tixt Dog</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<div class="job-listings-sec no-border" style="text-align: center;">
    <div id="searchResults"></div>
    @foreach (var item in Model.Messages)
    {
        var userImageURL = Model.AppUsers.FirstOrDefault(x => x.Id == item.id)?.ImageURL ?? "NoImage.png";
        var positionName = Model.Positions.FirstOrDefault(x => x.id == item.PositionId)?.PositionName ?? string.Empty;
        var categoryName = Model.Categories.FirstOrDefault(x => x.id == item.CategoryId)?.Name ?? string.Empty;
        var username = Model.AppUsers.FirstOrDefault(x => x.Id == item.SenderId).Name;

        <div class="job-listing wtabs  ml-5" style="width: 60%; margin: 0 auto;" onclick="location.href='@Url.Action("Detail", "job", new { id = item.id })'" style="cursor: pointer;">
            <div class="job-title-sec">
                <div class="c-logo">
                    <img src="~/assets/images/User/@userImageURL" alt="" style="width:100%; height:90px;" />
                </div>
                <h3 class="mr-4 text-center">@positionName / @categoryName</h3>

                @if (item.Description.Length < 100)
                {
                    <p>@item.Description</p>
                }
                else
                {
                    <p>@item.Description.Substring(0, 50)... </p>
                }

                <div class="job-style-bx">
                    <i>@item.Created</i>
                </div>
                <span>@username</span>
            </div>
        </div>
    }
</div>

